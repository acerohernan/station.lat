generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Owner {
  id String @id @default(uuid())
  email String @unique()
  image String? 
  first_name String?
  last_name String?
  phone String?
  welcome_flow_finished Boolean @default(false)
  company Company?
}

model TimeZone {
  id String @id @default(uuid())
  name String
  utc_difference Int
  companies Company[]
}

model Company {
  id String @id @default(uuid())
  owner_id String @unique 
  time_zone_id String 
  domain String @unique
  image String
  name String
  is_pro Boolean
  last_month_payment_failed Boolean
  free_trial_finished Boolean

  employees Employee[]

  time_zone TimeZone @relation(fields: [time_zone_id], references: [id])
  owner Owner @relation(fields: [owner_id], references: [id], onDelete: Cascade)
}

enum EmployeeRole {
  ADMIN
  EDITOR
  READER
}

model Employee {
  id String @id @default(uuid())
  company_id String
  role EmployeeRole
  email String @unique
  image String?
  name String
  created_at DateTime

  company Company @relation(fields: [company_id], references: [id])
}